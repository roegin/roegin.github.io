// AMZN PAY SDK 6/19/2023, 7:53:05 PM
if (window.amazon == null || window.amazon.Login == null) {
(function() {
var loginJs=function(e){"use strict";var t,n,o,i,r,a,s,c,u,d,p=p||{};p.Base={},p.Base.update=function(e,t){null==e&&(e={});for(var n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)e[i]=o[i]}return e},p.Base.clone=function(e,t){if(null==e||"object"!=typeof e)return e;if(e.constructor==Array){for(var n=[],o=0;o<e.length;o++)n[o]=t?p.Base.clone(e[o],t):e[o];return n}var i=function(){};i.prototype=e.constructor.prototype;n=new i;for(var r in e)n[r]=t?p.Base.clone(e[r],t):e[r];return n},p.Base.die=function(e,t){var n=p.Base.format.apply(void 0,arguments);throw p.Base.log("error",n),new Error(n)},p.Base.warn=function(e,t){var n=p.Base.format.apply(void 0,arguments);p.Base.log("warn",n)},p.Base.format=function(e,t){var n=arguments,o=1;return e.replace(/%((%)|[sid])/g,function(e){if(e[2])return e[2];var t=n[o++];return"object"==typeof t&&window.JSON&&window.JSON.stringify&&(t=window.JSON.stringify(t)),t})},p.Base.log=function(e,t){window.console&&window.console.log&&("function"==typeof t&&(t=t()),t=p.Base.format("[Amazon.%s] %s",e,t),window.console.log(t))},p.Base.validateEquals=function(e,t,n){t&&t===n||p.Base.die("expected %s value to be %s but was %s",e,n,t)},p.Base.validate=function(e,t,n,o){null==t&&(o||p.Base.die("missing %s",e)),typeof t!=n&&p.Base.die("expected %s to be a %s",e,n)},p.Base.getTimeInMs=function(){return(new Date).getTime()},p.Base.trim=function(e){return"string"==typeof e&&e||p.Base.die("missing or invalid input: %s",e),e.replace(/^\s+|\s+$/g,"")},p.Document={},p.Document.AMAZON_ROOT_ID="amazon-root",p.Document.findOrCreateRoot=function(){var e=document.getElementById(p.Document.AMAZON_ROOT_ID);return e||((e=document.createElement("div")).setAttribute("id",p.Document.AMAZON_ROOT_ID),document.body.appendChild(e)),e},p.Document.findOrCreateSubRoot=function(e,t){var n=document.getElementById(e);return n||((n=document.createElement("div")).setAttribute("id",e),t&&(n.setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("style","position: absolute; left: -1000px; top: -1000px"),n.style.setAttribute&&n.style.setAttribute("cssText","position: absolute; left: -1000px; top: -1000px")),p.Document.findOrCreateRoot().appendChild(n)),n},p.Document.createAjaxPostTarget=function(e){var t=p.Document.findOrCreateSubRoot("amazon-client-credentials-root",!0),n=p.xdc.makeRandomId(16),o=document.createElement("iframe");return o.setAttribute("name",n),t.appendChild(o),0==document.getElementsByName(n).length&&(t.removeChild(o),o=document.createElement('<iframe name="'+n+'"/>'),t.appendChild(o)),o.setAttribute("id",n),n},p.Document.destroyAjaxPostTarget=function(e){var t=document.getElementById(e);null!=t&&null!=t.parentNode&&t.parentNode.removeChild(t)},p.Event=function(){this.__invoke=[]},p.Event.prototype.wait=function(e,t){this.__invoke.push({fn:e,persist:!!t})},p.Event.prototype.fire=function(e){var t=this.__invoke;this.__invoke=[];for(var n=0;n<t.length;n++)t[n].persist&&this.__invoke.push(t[n]);for(n=0;n<t.length;n++)t[n].fn.apply(void 0,arguments)},p.JSON={},p.JSON.parse=(r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(e){throw{name:"SyntaxError",message:e,at:t,text:o}},s=function(e){return e&&e!==n&&a("Expected '"+e+"' instead of '"+n+"'"),n=o.charAt(t),t+=1,n},c=function(){var e,t="";for("-"===n&&(t="-",s("-"));n>="0"&&n<="9";)t+=n,s();if("."===n)for(t+=".";s()&&n>="0"&&n<="9";)t+=n;if("e"===n||"E"===n)for(t+=n,s(),"-"!==n&&"+"!==n||(t+=n,s());n>="0"&&n<="9";)t+=n,s();if(e=+t,isFinite(e))return e;a("Bad number")},u=function(){var e,t,o,i="";if('"'===n)for(;s();){if('"'===n)return s(),i;if("\\"===n)if(s(),"u"===n){for(o=0,t=0;t<4&&(e=parseInt(s(),16),isFinite(e));t+=1)o=16*o+e;i+=String.fromCharCode(o)}else{if("string"!=typeof r[n])break;i+=r[n]}else i+=n}a("Bad string")},d=function(){for(;n&&n<=" ";)s()},i=function(){switch(d(),n){case"{":return function(){var e,t={};if("{"===n){if(s("{"),d(),"}"===n)return s("}"),t;for(;n;){if(e=u(),d(),s(":"),Object.hasOwnProperty.call(t,e)&&a('Duplicate key "'+e+'"'),t[e]=i(),d(),"}"===n)return s("}"),t;s(","),d()}}a("Bad object")}();case"[":return function(){var e=[];if("["===n){if(s("["),d(),"]"===n)return s("]"),e;for(;n;){if(e.push(i()),d(),"]"===n)return s("]"),e;s(","),d()}}a("Bad array")}();case'"':return u();case"-":return c();default:return n>="0"&&n<="9"?c():function(){switch(n){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}a("Unexpected '"+n+"'")}()}},function(e,r){var s;return o=e,t=0,n=" ",s=i(),d(),n&&a("Syntax error"),"function"==typeof r?function e(t,n){var o,i,a=t[n];if(a&&"object"==typeof a)for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(void 0!==(i=e(a,o))?a[o]=i:delete a[o]);return r.call(t,n,a)}({"":s},""):s}),p.JSON.stringify=function(){function e(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var t,n,o,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}return function(e,i,r){var s;if(t="",n="","number"==typeof r)for(s=0;s<r;s+=1)n+=" ";else"string"==typeof r&&(n=r);if(o=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw new Error("JSON.stringify");return function e(i,r){var s,c,u,d,p,f=t,l=r[i];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(i)),"function"==typeof o&&(l=o.call(r,i,l)),typeof l){case"string":return a(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(t+=n,p=[],"[object Array]"===Object.prototype.toString.apply(l)){for(d=l.length,s=0;s<d;s+=1)p[s]=e(s,l)||"null";return u=0===p.length?"[]":t?"[\n"+t+p.join(",\n"+t)+"\n"+f+"]":"["+p.join(",")+"]",t=f,u}if(o&&"object"==typeof o)for(d=o.length,s=0;s<d;s+=1)"string"==typeof o[s]&&(u=e(c=o[s],l))&&p.push(a(c)+(t?": ":":")+u);else for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u=e(c,l))&&p.push(a(c)+(t?": ":":")+u);return u=0===p.length?"{}":t?"{\n"+t+p.join(",\n"+t)+"\n"+f+"}":"{"+p.join(",")+"}",t=f,u}}("",{"":e})}}(),p.QS=p.QS||{},p.QS.encode=function(e){var t="";for(var n in e)t&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]+"");return t},p.QS.decode=function(e){for(var t={},n=e.split("&"),o=0;o<n.length;o++){var i=n[o].split("=");2==i.length&&(t[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")))}return t},function(){function e(e,t){return e.scopeMap.hasOwnProperty(t)}function t(t,n){for(var o=0;o<n.length;o++){var i=n[o];""==i||e(t,i)||(t.scopeSet.push(i),t.scopeMap[i]=1)}}p.Scope=function(e){var n;this.scopeSet=[],n="string"==typeof e?e.split(/\s+/):e,this.scopeMap={},t(this,n)},p.Scope.prototype.contains=function(t){for(var n=0;n<t.scopeSet.length;n++)if(!e(this,t.scopeSet[n]))return!1;return!0},p.Scope.prototype.add=function(e){t(this,e.scopeSet)},p.Scope.prototype.forEach=function(e){for(var t=0;t<this.scopeSet.length;t++)e(this.scopeSet[t])},p.Scope.prototype.toString=function(){return this.scopeSet.join(" ")}}(),function(){p.storage={};var e=null;p.storage.getDomain=function(){return e},p.storage.setDomain=function(t){p.Base.validate("domain",t,"string"),t=t.replace(/^\s+|\s+$/g,"");var n="."+window.location.hostname;"."!=t.charAt(0)&&(t="."+t),n.indexOf(t)!=n.length-t.length&&p.Base.die("Site domain must contain the current page's domain"),e=t},p.storage.StorageProvider=function(){},p.storage.StorageProvider.prototype.getItem=function(e){},p.storage.StorageProvider.setItem=function(e,t,n){},p.storage.StorageProvider.removeItem=function(e){}}(),function(){function e(){}e.prototype.getItem=function(e){var t=new RegExp("(?:^|;)\\s*"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*)(?:;|$)").exec(document.cookie);return null==t?null:unescape(t[1])},e.prototype.setItem=function(e,t,n){var o;if(null==n)o="Fri, 31 Dec 9999 23:59:59 GMT";else{var i=(new Date).getTime();o=new Date(i+1e3*n).toGMTString()}var r=p.storage.getDomain(),a=null==r?"":";Domain="+r,s=p.uri.Uri.thisUri().isHttpLocalhost()?"":";Secure",c="session"==n?"":";Expires="+o,u=e+"="+escape(t)+c+a+";Path=/"+s;document.cookie=u},e.prototype.removeItem=function(e){p.storage.Cookie.setItem(e,"null",0)},p.storage.Cookie=new e}(),function(){function e(e){this.provider=e}e.prototype.getItem=function(e){return this.provider.getItem(e)},e.prototype.setItem=function(e,t,n){this.provider.setItem(e,t,n)},e.prototype.removeItem=function(e){p.storage.Cookie.removeItem(e)};var t=p.storage.Cookie;p.storage.Any=new e(t)}(),function(){p.LoginStateCache={};var e="amazon_Login_state_cache",t=/.*(eu|apac|na).*(account).*/;function n(t){var n;try{n=p.JSON.parse(t).clear}catch(e){n=void 0}n&&(console.log("Deleting cache cookie now."),p.storage.Any.removeItem(e))}p.LoginStateCache.cacheLoginState=function(t,n){if("bearer"==t.token_type){var o={access_token:t.access_token,max_age:n,expiration_date:p.Base.getTimeInMs()+1e3*n,client_id:p.Login.getClientId(),scope:t.scope};g.isConnectedAuth()&&(o.domain=p.Login.getDomain()),t.generated_from_mshop&&(o.generated_from_mshop=t.generated_from_mshop);var i=p.JSON.stringify(o);p.storage.Any.setItem(e,i,"session")}},p.LoginStateCache.getCachedLoginState=function(){var t=p.storage.Any.getItem(e);if(null!=t){var n=p.JSON.parse(t);if(null!=n&&n.expiration_date>p.Base.getTimeInMs())return g.isConnectedAuth()&&void 0!==n.domain&&n.domain!=p.Login.getDomain()?null:(n.scope=new p.Scope(n.scope),n)}return null},p.LoginStateCache.isTokenFromAmazonApp=function(){var e=p.LoginStateCache.getCachedLoginState();return!!e&&e.generated_from_mshop},p.LoginStateCache.clearLoginStateAfterLogoutFromRetail=function(){var e=p.Login.getOrigin().makeUri("/checkout/clear",null,null).toString();if(!e.match(t)){var o,i=p.Login.getEnv(),r="?coe="+p.Login.getCOE()+"&env="+i;if(window.XDomainRequest)(o=new window.XDomainRequest).onload=function(){n(o.responseText)};else{var a=!1;(o=new window.XMLHttpRequest).onreadystatechange=function(){a||4!=o.readyState||(a=!0,n(o.responseText))}}o.open("GET",e+r,!0),o.withCredentials=!0,o.send(null)}},p.LoginStateCache.clearLoginState=function(){p.storage.Any.removeItem(e)}}(),p.UA={},p.UA.doesSupportCORS=function(){return!!(window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest)||void 0!==window.XDomainRequest},p.uri=p.uri||{},p.uri.Scheme={HTTP:"http",HTTPS:"https"},p.uri.Uri=function(e,t,n,o,i,r){this.__origin=new p.uri.Origin(e,t,n),"string"==typeof o&&o||p.Base.die("missing or invalid path: %s",o),this.__path=o,"object"==typeof i&&(i=p.QS.encode(i)),i&&"string"!=typeof i&&p.Base.die("invalid query: %s",i),this.__query=i||"","object"==typeof r&&(r=p.QS.encode(r)),r&&"string"!=typeof r&&p.Base.die("invalid fragment: %s",r),this.__fragment=r||""},p.uri.Uri.parse=function(e){var t,n,o,i=((t=document.createElement("div")).innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild);return""==i.host&&(i.href=i.href),new p.uri.Uri(i.protocol,i.hostname,((o=i.port)&&"0"!=o||(o=null),o),((n=i.pathname)?"/"!=n[0]&&(n="/"+n):n="/",n),i.search.substring(1),i.href.split("#")[1]||"")},p.uri.Uri.thisUri=function(){return p.uri.Uri.parse(window.location.href+"")},p.uri.Uri.prototype.scheme=function(){return this.__origin.scheme()},p.uri.Uri.prototype.host=function(){return this.__origin.host()},p.uri.Uri.prototype.port=function(){return this.__origin.port()},p.uri.Uri.prototype.path=function(){return this.__path},p.uri.Uri.prototype.query=function(){return this.__query},p.uri.Uri.prototype.fragment=function(){return this.__fragment},p.uri.Uri.prototype.isHttpLocalhost=function(){var e=this.__origin.scheme()==p.uri.Scheme.HTTP,t=this.__origin.host();return e&&("localhost"==t||"127.0.0.1"==t)},p.uri.Uri.prototype.toString=function(){var e=this.__origin.toString();return e+=this.__path,e+=this.__query?"?"+this.__query:"",e+=this.__fragment?"#"+this.__fragment:""},p.uri.Uri.prototype.toOrigin=function(){return this.__origin},p.uri.Uri.prototype.edit=function(e){return new p.uri.Uri(void 0!==e.scheme?e.scheme:this.scheme(),void 0!==e.host?e.host:this.host(),void 0!==e.port?e.port:this.port(),void 0!==e.path?e.path:this.path(),void 0!==e.query?e.query:this.query(),void 0!==e.fragment?e.fragment:this.fragment())},p.uri.Origin=function(e,t,n){var o;"string"==typeof e&&(o=e.match(/^(https?)(:(\/\/)?)?$/i))||p.Base.die("missing or invalid scheme: %s",e),this.__scheme="http"==o[1]?p.uri.Scheme.HTTP:p.uri.Scheme.HTTPS,"string"==typeof t&&t&&0!=p.Base.trim(t).length||p.Base.die("missing or invalid host: %s",t),this.__host=t,n&&((n+"").match(/^\d+$/)||p.Base.die("invalid port: %s",n),(80==n&&this.__scheme==p.uri.Scheme.HTTP||443==n&&this.__scheme==p.uri.Scheme.HTTPS)&&(n=null)),this.__port=n?n+"":null},p.uri.Origin.REGEXP=/^(http|https):\/\/(.+?)(:(\d+))?$/i,p.uri.Origin.parse=function(e){var t=p.uri.Origin.REGEXP,n=e.match(t);if(n)return new p.uri.Origin(n[1],n[2],n[4]?n[4]-0:null);throw p.Base.die("invalid origin: %s",e),new Error},p.uri.Origin.thisOrigin=function(){return p.uri.Uri.thisUri().toOrigin()},p.uri.Origin.prototype.scheme=function(){return this.__scheme},p.uri.Origin.prototype.host=function(){return this.__host},p.uri.Origin.prototype.port=function(){return this.__port},p.uri.Origin.prototype.toString=function(){var e="";return e+=this.__scheme+"://",e+=this.__host,e+=this.__port?":"+this.__port:""},p.uri.Origin.prototype.makeUri=function(e,t,n){return new p.uri.Uri(this.__scheme,this.__host,this.__port,e,t,n)},p.xdc=p.xdc||{},p.xdc.VERSION=1,p.xdc.ROOT_ID="amazon-proxy-root",p.xdc.PROXY_ID="amazon-proxy-iframe-name",p.xdc.FIXED_LWA_PATH="/sdk/2018-02-08-63k6q26l",p.xdc.PROXY_FILE_NAME="/proxy.html",p.xdc.TOPIC_FILE_NAME="/topic.html",p.xdc.makeProxyOriginFromTargetOrigin=function(e,t){if(window.__toucanForceProxyOriginTo)return p.uri.Origin.parse(window.__toucanForceProxyOriginTo);if(window.__toucanForceProxyOriginToThisOrigin)return p.uri.Origin.thisOrigin();var n;if(n=g.parseURL(e.host())){var o="api-cdn.amazon."+n[2];return t&&(o=e.host()),p.xdc.makeProxyOrigin(e,o)}throw p.Base.die("no proxy origin; unsupported target origin: %s",e),new Error},p.xdc.makeProxyOrigin=function(e,t){if(e.scheme()==p.uri.Scheme.HTTPS)return new p.uri.Origin(p.uri.Scheme.HTTPS,t,null);p.Base.die("no proxy origin; unsupported non-https target origin for amazon: %s",e)},p.xdc.makeProxyId=function(e,t){if(t)return p.xdc.PROXY_ID;var n=e.host().replace(/[^a-z0-9]/gi,"_");return e.port()&&(n+="_"+e.port()),p.Base.format("amazon-proxy-%s-%s",e.scheme(),n)},p.xdc.makeProxyUri=function(e,t,n){var o=(n?"/static/sdk":p.xdc.FIXED_LWA_PATH)+p.xdc.PROXY_FILE_NAME,i=n?"":{version:p.xdc.VERSION+""};return e.makeUri(o,i,t)},p.xdc.makeTopicUri=function(e,t,n){var o=(n?"/sdk/2018-02-08-63k6q26l":p.xdc.FIXED_LWA_PATH)+p.xdc.TOPIC_FILE_NAME;return t.version=p.xdc.VERSION+"",e.makeUri(o,t,"")},p.xdc.makeTopicId=function(){return p.xdc.makeRandomId(16)},p.xdc.makeRandomId=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},p.xdc.Rho={},p.xdc.Rho.__topics={},p.xdc.Rho.__tr=null,p.xdc.Rho.waitForUri=function(e,t,n){var o=p.xdc.makeProxyOriginFromTargetOrigin(e,t),i=p.xdc.Rho.makeTrIfNotExists(o),r=p.xdc.Rho.makeProxyIfNotExists(o,i,t),a=p.xdc.makeTopicId();return p.xdc.Rho.waitForTopic(a,n),p.xdc.Rho.makeTopicUri(o,r,a,t)},p.xdc.Rho.waitForTopic=function(e,t){p.xdc.Rho.__topics[e]||(p.xdc.Rho.__topics[e]=new p.Event),p.xdc.Rho.__topics[e].wait(t,!1)},p.xdc.Rho.recv=function(e,t){var n=p.xdc.Rho.__topics[e];n&&n.fire(t)},p.xdc.Rho.makeTrIfNotExists=function(e){return p.xdc.Rho.__tr||(p.xdc.Rho.__tr=p.xdc.Tr.choose(),p.xdc.Rho.__tr.recv(e,function(e,t){p.xdc.Rho.recv(e,t)})),p.xdc.Rho.__tr},p.xdc.Rho.makeProxyIfNotExists=function(e,t,n){var o=p.xdc.makeProxyId(e,n),i=document.getElementById(o);i||((i=document.createElement("iframe")).setAttribute("id",o),i.setAttribute("name",o),i.setAttribute("src",p.xdc.Rho.makeProxyUri(e,t,n).toString()),p.Document.findOrCreateSubRoot(p.xdc.ROOT_ID,!0).appendChild(i));return o},p.xdc.Rho.thisUriWithoutQueryOrFragment=function(){return p.uri.Uri.parse(window.location.href+"").edit({query:"",fragment:""})},p.xdc.Rho.makeProxyUri=function(e,t,n){var o=p.xdc.Rho.thisUriWithoutQueryOrFragment();return p.xdc.makeProxyUri(e,{uri:o.toString(),tr:t.name()},n)},p.xdc.Rho.makeTopicUri=function(e,t,n,o){var i=p.xdc.Rho.thisUriWithoutQueryOrFragment();return p.xdc.makeTopicUri(e,{uri:i.toString(),proxy:t,topic:n},o)},p.xdc.Message={},p.xdc.Message.MAGIC="ABMNZNXDC",p.xdc.Message.REGEXP=/^ABMNZNXDC;([\w\d\_\-]+);(.*)$/,p.xdc.Message.encode=function(e,t){return p.Base.format("%s;%s;%s",p.xdc.Message.MAGIC,e,p.QS.encode(t))},p.xdc.Message.decode=function(e){var t=e.match(p.xdc.Message.REGEXP);if(t){var n={};return n.id=t[1],n.data=p.QS.decode(t[2]),n}return null},p.xdc.Tr=function(){},p.xdc.Tr.prototype.name=function(){},p.xdc.Tr.prototype.recv=function(e,t){},p.xdc.Tr.prototype.send=function(e,t,n){},p.xdc.Tr.choose=function(){var e=window.postMessage?"pm":"fr";return window.__toucanForceTransport&&(e=window.__toucanForceTransport),p.xdc.Tr.get(e)},p.xdc.Tr.get=function(e){if("pm"==e)return new p.xdc.Tr.Pm;if("fr"==e)return new p.xdc.Tr.Fr;throw p.Base.die("unknown transport: %s",e),new Error};var f={pm:"ACCESS_TOKEN_RECEIVED_PM",fr:"ACCESS_TOKEN_RECEIVED_FR"},l=/^(.+\.)?(amazon\.[\w\-\.]+)$/;p.xdc.Tr.Pm=function(){this.__event=void 0},p.xdc.Tr.Pm.prototype.name=function(){return"pm"},p.xdc.Tr.Pm.prototype.listen=function(){if(void 0===this.__event){var e=this.__event=new p.Event,t=function(t){var n;void 0!==t&&t.origin.match(l)&&((n=p.xdc.Message.decode(t.data))&&e.fire(t.origin,n.id,n.data))};window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent?window.attachEvent("onmessage",t):p.Base.die("cannot attach message event")}},p.xdc.Tr.Pm.prototype.recv=function(e,t){this.listen();var n=e.toString();this.__event.wait(function(e,o,i){var r=p.uri.Origin.thisOrigin().toString();if(e==n||e==r){if(i&&i.method&&f[i.method]){var a=f[i.method];g.publishCountMetric(a)}t(o,i)}else p.Base.warn("Either message from %s does not match proxy origin %s or message from %s does not match current window origin %s",e,n,e,r)},!0)},p.xdc.Tr.Pm.prototype.send=function(e,t,n){var o=e.toOrigin(),i=p.JSON.parse(p.JSON.stringify(n));setTimeout(function(){window.parent.postMessage(p.xdc.Message.encode(t,i),o.toString())},1)},p.xdc.Tr.Fr=function(){},p.xdc.Tr.Fr.prototype.name=function(){return"fr"},p.xdc.Tr.Fr.prototype.recv=function(e,t){window.__toucanInvokeFragment=function(e,n){t(e,n)}},p.xdc.Tr.Fr.prototype.send=function(e,t,n){var o=e.edit({query:p.xdc.Tr.Fr.augmentQuery(e.query()),fragment:p.xdc.Message.encode(t,n)}),i=document.createElement("iframe");i.setAttribute("src",o.toString()),document.body.appendChild(i)},p.xdc.Tr.Fr.augmentQuery=function(e){return(e=e||"")&&(e+="&"),e+=p.xdc.Message.MAGIC,e+="="+p.xdc.makeRandomId(8)},function(){var e=window.location.href.split("#")[1]||"";if(e){var t=p.xdc.Message.decode(e);t&&(document.documentElement.style.display="none","function"==typeof window.parent.parent.__toucanInvokeFragment&&window.parent.parent.__toucanInvokeFragment(t.id,t.data))}}(),function(){p.Login={Region:{NorthAmerica:"NA",Europe:"EU",AsiaPacific:"APAC",UnitedStates:"US",UnitedKindom:"UK",Germany:"DE",Italy:"IT",France:"FR",Spain:"ES",Japan:"JP"},Metrics:[],EXTERNAL_TOKEN_COOKIE_NAME:"amazon_Login_accessToken"};var e="apay-session-set",t="amazon-pay-cors-blocked-status",n="/ap/oa",o={NA:["https://na.account.amazon.com","https://api.amazon.com"],EU:["https://eu.account.amazon.com","https://api.amazon.co.uk"],APAC:["https://apac.account.amazon.com","https://api.amazon.co.jp"],US:["https://payments.amazon.com","https://api.amazon.com"],UK:["https://pay.amazon.co.uk","https://api.amazon.co.uk"],DE:["https://pay.amazon.de","https://api.amazon.co.uk"],IT:["https://pay.amazon.it","https://api.amazon.co.uk"],FR:["https://pay.amazon.fr","https://api.amazon.co.uk"],ES:["https://pay.amazon.es","https://api.amazon.co.uk"],JP:["https://pay.amazon.co.jp","https://api.amazon.co.jp"]},i={"eu.account.amazon.com":"payments.amazon.co.uk","na.account.amazon.com":"payments.amazon.com","apac.account.amazon.com":"payments.amazon.co.jp"},r="amazon-pay-connectedAuth",a={lwa_general:"/ap/oa",connectedAuth_general:"/checkout/authCreate"},s="LOGIN_POPUP_INITIATED",c="LOGIN_POPUP_BLOCKED",u="amazonloginpopup",d=800,f=660,l="amazon-client-credentials-root",m=/^[\w\-\.]+$/,h=/^((http|https):\/\/)?([a-z0-9\-\.]+)(:(\d+))?\/?$/i,_={ALWAYS:"always",AUTO:"auto",NEVER:"never"},v=null,w=!1,y=!1,L=[],S={QUEUED:"queued",IN_PROGRESS:"in_progress",COMPLETE:"complete"},O="LWA_URL_REACH_LIMIT",A=void 0,E=void 0,x=void 0,C=void 0,P=n;p.Login.putCounterMetric=function(e){p.Login.Metrics.indexOf(e)<0&&p.Login.Metrics.push(e)},p.Login.getClientId=function(){return p.Login.putCounterMetric("getClientId-api-metric"),A},p.Login.setClientId=function(e){e.match(m)||p.Base.die("invalid client ID: %s",e),A=e},p.Login.setWebflowParams=function(e,t,n){E=e,x=t,C=n},p.Login.getMerchantID=function(){var e=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","getCartOwnerId");return e?e():null};var T="na.account.amazon.com",k="na.account.amazon.com",z="payments.amazon.com",I=new p.uri.Origin("https",T,null),U=new p.uri.Origin("https",k,null),b=(new p.uri.Origin("https",z,null),new p.uri.Origin("https","api.amazon.com",null));p.Login.getDomain=function(){return T},p.Login.getLWADomain=function(){return k},p.Login.getAPIOrigin=function(){return b},p.Login.getCOE=function(){return E},p.Login.getEnv=function(){return C};var R=!1;function D(e){var t=e.match(h);t||p.Base.die("invalid domain: %s",e);var n=t[2]?t[2].toLowerCase():"https";"https"!=n&&p.Base.die("invalid domain: %s; scheme must be https",e);var o=t[3];o.match(/^amazon\.[a-z\.]+$/)&&(o="www."+o);var i=t[5];return new p.uri.Origin(n,o,i)}p.Login.setSandboxMode=function(e){"number"==typeof e&&(e=!!e),p.Base.validate("sandboxMode",e,"boolean"),R=e},p.Login.getSandboxMode=function(){return R},p.Login.setDomain=function(e){I=D(e),T=e},p.Login.setLWADomain=function(e){U=D(e),k=e},p.Login.setFundusDomain=function(e){D(e),z=e},p.Login.setAPIDomain=function(e){p.Login.putCounterMetric("setAPIDomain-api-metric"),b=D(e)},p.Login.setRegion=function(e){var t;p.Login.putCounterMetric("setRegion-api-metric"),e&&(t=e.toUpperCase()),t&&t in o?o[t].length==[0,1].length?p.Login.setAPIDomain(o[t][1]):p.Base.die("missing domain or api domain configuration for given region."):(p.Login.setDomain("https://na.account.amazon.com"),p.Login.setLWADomain("https://na.account.amazon.com"),p.Login.setFundusDomain("https://payments.amazon.com"),p.Login.setAPIDomain("https://api.amazon.com"))},p.Login.synchronizeSession=function(){p.LoginStateCache.clearLoginStateAfterLogoutFromRetail()},p.Login.isTokenFromAmazonApp=function(){return p.LoginStateCache.isTokenFromAmazonApp()};var M="";p.Login.setLanguage=function(e){p.Login.putCounterMetric("setLanguage-api-metric"),M=e};var B="";p.Login.setLanguageHint=function(e){p.Login.putCounterMetric("setLanguageHint-api-metric"),B=e},p.Login.getOrigin=function(){return I},p.Login.getLWAOrigin=function(){return U};var N=!1;function W(e){var t=p.Base.update({interactive:void 0,popup:!0,response_type:"token",response_mode:void 0,delegated_requests:void 0,direct_post_uri:void 0,state:void 0,scope:void 0,scope_data:void 0,optional_scope:void 0,"com.amazon.oauth2.options":void 0,workflow_data:void 0},e||{});p.Base.validate("options.response_type",t.response_type,"string"),t.response_mode&&p.Base.validate("options.response_mode",t.response_mode,"string"),t.direct_post_uri&&p.Base.validate("options.direct_post_uri",t.direct_post_uri,"string");var n=t.delegated_requests;if(n){p.Base.validateEquals("options.response_type",t.response_type,"delegate"),t.scope&&p.Base.die("options.scope is not supported for delegated authorization"),t.scope_data&&p.Base.die("options.scope_data is not supported for delegated authorization"),t.optional_scope&&p.Base.die("options.optional_scope is not supported for delegated authorization"),t.interactive?t.interactive!=_.ALWAYS&&p.Base.die("options.interactive should be '"+_.ALWAYS+"' for delegated authorization"):t.interactive=_.ALWAYS;for(var o={},i=0;i<n.length;i++){var r=n[i],a=F(t,r);o[r.request_id]=a}t.delegated_requests=o}else if(q(t,"missing options.scope"),H(t),X(t),t.interactive?t.interactive!=_.AUTO&&t.interactive!=_.ALWAYS&&t.interactive!=_.NEVER&&p.Base.die("expected options.interactive to be one of '"+_.AUTO+"', '"+_.ALWAYS+"', or '"+_.NEVER+"'"):t.interactive=_.AUTO,t.optional_scope){t.optional_scope.constructor!==Array&&"string"!=typeof t.optional_scope&&p.Base.die("expected options.optional_scope to be a string or array"),t.interactive!=_.NEVER&&p.Base.die("options.optional_scope is only supported for options.interactive = never");var s=new p.Scope(t.optional_scope);t.scope.add(s);var c={id_token:{}};s.forEach(function(e){c.id_token[e]={essential:!1}}),t.optional_scope=p.JSON.stringify(c)}return t}function F(e,t){t.response_mode&&p.Base.die("response_mode is not supported in delegated requests"),t.direct_post_uri&&p.Base.die("direct_post_uri is not supported in delegated requests"),"popup"in t&&p.Base.die("popup is not supported in delegated requests"),t.interactive&&p.Base.die("interactive mode is not supported in delegated requests"),t.optional_scope&&p.Base.die("optional_scope is not supported in delegated requests"),t.delegated_requests&&p.Base.die("delegated_requests is not supported in delegated requests"),null==t.response_type&&(t.response_type="token"),q(t,"missing 'scope' in delegated request"),t.scope=t.scope.toString(),H(t),X(e),p.Base.validate("request_id",t.request_id,"string"),t.client_id&&!t.client_id.match(m)&&p.Base.die("invalid client_id format: %s",t.client_id);var n={};for(var o in t)"request_id"!=o&&(n[o]=t[o]);return n}function q(e,t){e.scope||p.Base.die(t),e.scope.constructor!==Array&&"string"!=typeof e.scope&&p.Base.die("expected scope to be a string or array"),e.scope=new p.Scope(e.scope)}function H(e){e.scope_data&&(e.scope_data=p.JSON.stringify(e.scope_data))}function X(e){if(e.workflow_data){var t={};t.workflow_data=e.workflow_data,e["com.amazon.oauth2.options"]=p.JSON.stringify(t)}}function G(e){var t=parseInt(e.expires_in,10);return t<=60?t:t-Math.min(Math.floor(.1*t),300)}function J(){null!=v&&("function"==typeof v.close&&v.close(),v=null)}function j(t,o,i,s,c){var u={client_id:A,redirect_uri:o,response_type:t.response_type,language:M,ui_locales:B,login_popup_fallback:!1};if(t["com.amazon.oauth2.options"]&&(u["com.amazon.oauth2.options"]=t["com.amazon.oauth2.options"]),t.response_mode&&(u.response_mode=t.response_mode),t.scope){var d=t.scope.toString();""===d?d="payments:widget":-1===d.indexOf("payments:")&&(d+=" payments:widget"),u.scope=d}if(t.direct_post_uri&&(u.direct_post_uri=t.direct_post_uri),t.scope_data&&(u.scope_data=t.scope_data),R&&(u.sandbox=!0),t.state&&(u.state=t.state),i&&(u.exac=i,c&&(u.exacde=s)),t.delegated_requests&&(u.delegated_requests=p.JSON.stringify(t.delegated_requests)),c){u.coe=E,u.ledger_currency=x,u.env=C,u.is_itp_request=!0,u.origin_url=window.location.href,u.interactive=t.interactive?t.interactive:"null",K()&&(u.user_agent_blacklist=K());var f=p.Login.getMerchantID();f&&(u.merchant_id=f),u.apst=g.readCookie(e)}else{var l=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","Internal","getDynamicConfigValue");if(l&&l("ENABLE_LWA_PRE_AUTH_ADD_SCOPE_DATA"))if(l("ENABLE_LWA_PRE_AUTH_ADD_SCOPE_DATA")&&p.Payments.hasPaymentScope(u.scope)){var m=p.Payments.appendPaymentsScopeData(u.scope_data,u.sandbox,o);u.scope_data=m;var h=function(){var e=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","Internal","getDynamicConfigContent");if(e&&e("LWA_PRE_AUTH_ADD_SCOPE_DATA_LIMIT")){var t=e("LWA_PRE_AUTH_ADD_SCOPE_DATA_LIMIT");return!t||isNaN(t)?null:t}return null}();if(null!=h){var _=g.getAuthorizationPath(r,a,n,!c),v=U.makeUri(_,u).toString();if(v.length>h){delete u.scope_data,t.scope_data&&(u.scope_data=t.scope_data);var w={};w.url=v,g.publishCountMetric(O,w,!1,!t.popup)}}}}return P=g.getAuthorizationPath(r,a,n,!c),c?I.makeUri(P,u):U.makeUri(P,u)}function K(){var e=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","Internal","getDynamicConfigContent");if(e&&e("MOBILE_SSO_USER_AGENT_BLACKLIST")){var t=e("MOBILE_SSO_USER_AGENT_BLACKLIST");if(t&&t.length>0)return t.toString()}return null}function Y(e,t,n){if(y=!1,null!=t.access_token){var o=G(t);p.LoginStateCache.cacheLoginState(t,o),p.Login.shouldUseExternalCookie()?p.storage.Cookie.setItem(p.Login.EXTERNAL_TOKEN_COOKIE_NAME,t.access_token,o):p.storage.Cookie.removeItem(p.Login.EXTERNAL_TOKEN_COOKIE_NAME)}else n&&p.storage.Cookie.removeItem(p.Login.EXTERNAL_TOKEN_COOKIE_NAME);e.respond(t);var i=L;L=[];for(var r=0;r<i.length;r++)Z(i[r])}function Q(e,t,n,o){var i,r=["access_token","token_type","expires_in","scope","state","error_description","error"],a={};for(var s in t=t.replace(/[?&]apar=ABMNZNXDC[\w-%]+method%3Dfr/,"")||t,r){var c=r[s];c in e&&(a[c]=e[c])}var u=p.QS.encode(a);!n&&o?i=(i=p.uri.Uri.parse(t)).edit({fragment:u}):(t+=-1==t.indexOf("?")?"?":"&",t+=u,i=p.uri.Uri.parse(t));var d,f,l=p.uri.Uri.thisUri();i.scheme()==p.uri.Scheme.HTTPS||i.isHttpLocalhost()||p.Base.die("attempted redirect to %s but scheme is not HTTPS",t),i.host()==l.host()||(d=i.host(),window.OffAmazonPayments.Widgets.Utilities.isNextURIHostWhitelisted(p.Login.getMerchantID(),d))||p.Base.die("attempted redirect to %s but it does not match current host %s",i.host(),l.host()),!n&&o?te(i.toString()):(f=t,J(),window.location.href=f)}function V(e){setTimeout(e,0)}function $(e){var t=this;this.options=e,this.redirectUrl=null,this.callbacks=[],this.response=null,this.publicInterface={status:null,onComplete:function(e){"string"!=typeof e&&"function"!=typeof e&&p.Base.die("onComplete expects handler parameter to be a function or a string");var n=t.publicInterface.status==S.COMPLETE;if("string"==typeof e)n?Q(t.response,e,t.options.popup,"token"==t.options.response_type):t.redirectUrl=e;else if("function"==typeof e){var o=e;n?V(function(){o(t.publicInterface)}):t.callbacks.push(o)}return t.publicInterface}}}function Z(e){var n=e.getOptions(),o=null,r=!n.popup,s="token"==n.response_type,c=g.isConnectedAuthForAuthorize(n.scope,r,r?e.getRedirectUrl():null,r?window.location.hostname:null,s);if(n.delegated_requests)ee(e,null,0,!1);else{if(n.interactive==_.ALWAYS&&w&&(n.interactive=_.AUTO),n.interactive==_.ALWAYS)p.LoginStateCache.clearLoginState();else{var u,d=null,f=null;if(p.Login.shouldUseExternalCookie()&&(d=p.storage.Cookie.getItem(p.Login.EXTERNAL_TOKEN_COOKIE_NAME)),(o=p.LoginStateCache.getCachedLoginState())&&("token"==n.response_type&&n.scope.add(o.scope),d?d!=o.access_token&&(p.LoginStateCache.clearLoginState(),o=null):(d=o.access_token,f=o.expiration_date)),o&&o.scope.contains(n.scope)&&"token"==n.response_type)u={access_token:o.access_token,token_type:"bearer",expires_in:Math.floor((o.expiration_date-p.Base.getTimeInMs())/1e3),scope:o.scope.toString()},null!=n.state&&(u.state=n.state);else if(n.interactive==_.NEVER&&n.popup){if(y)return L.push(e),void e.setStatus(S.QUEUED);if(d)return void function(e,n,o,r){y=!0;var s=p.Document.findOrCreateSubRoot(l,!0),c=p.Document.createAjaxPostTarget(l),u=document.createElement("form");s.appendChild(u),u.setAttribute("method","POST"),u.setAttribute("target",c);var d=e.getOptions(),f=I;!r&&k in i?f=D(i[k]):r||(f=D(z));null!=g.readCookie(t)&&(f=D("payments.amazon.com"));var m=p.xdc.Rho.waitForUri(f,!0,function(t){s.removeChild(u),p.Document.destroyAjaxPostTarget(c),null==t&&(t={error:"server_error",description:"Server error."}),Y(e,t,!1)}),h={client_id:A,exac:n,grant_type:"client_credentials",redirect_uri:m,response_type:d.response_type,scope:d.scope};null!=d.state&&(h.state=d.state);null!=d.response_mode&&(h.response_mode=d.response_mode);null!=d.direct_post_uri&&(h.direct_post_uri=d.direct_post_uri);null!=d.scope_data&&(h.scope_data=d.scope_data);null!=d.optional_scope&&(h.claims=d.optional_scope);null!=d["com.amazon.oauth2.options"]&&(h["com.amazon.oauth2.options"]=d["com.amazon.oauth2.options"]);h.exacde=o,h.coe=E,h.ledger_currency=x,h.env=C,h.is_itp_request=!0,P=a.connectedAuth_general;var _=f.makeUri(P,h).toString();u.setAttribute("action",_),u.submit()}(e,d,f,c);u={error:"invalid_grant",error_description:"invalid grant"}}if(u)return void V(function(){e.respond(u)})}ee(e,d,f,c)}}function ee(e,t,n,o){var i=e.getOptions();if(i.popup){y=!0;var r=p.xdc.Rho.waitForUri(o?I:U,o,function(t){J(),Y(e,t,!0)}),a=j(e.getOptions(),r,t,n,o),l=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","isBrowserInPopupBlacklist");l&&l()?window.top.location.href=a.toString():function(e,t,n){var o=void 0!==window.screenX?window.screenX:window.screenLeft,i=void 0!==window.screenY?window.screenY:window.screenTop,r=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,a=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight,l=d,m=f,h=o+Math.floor((r-l)/2),_=i+Math.floor((a-m)/2);h=h<0?0:h,_=_<0?0:_;var w=void 0!==window.screen.availHeight?window.screen.availHeight-100:window.screen.height-150,y=p.Base.format("left=%s,top=%s,width=%s,height=%s,resizable=1,scrollbars=1",h,_,l,Math.min(m,w));if(v=window.open(e.toString(),u,y),g.publishCountMetric(s),null==v){g.publishCountMetric(c);var L=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","Internal","getDynamicConfigValue"),S=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","Internal","getPopupFallbackWeblabTreatment"),O=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","isMerchantInPopupFallbackBlacklist");L&&L("ENABLE_POPUP_FALLBACK")&&O&&!O()&&S&&S(function(t){if(t&&n){var o=(e=p.uri.Uri.parse(e.toString())).query();o=o.replace(/login_popup_fallback=[^&]+/,"login_popup_fallback=true"),e=e.edit({query:o});try{window.top.location.href=e.toString()}catch(e){console.log("popup fallback failed")}}})}}(a,0,o)}else{var m=e.getRedirectUrl();m||p.Base.die("Missing redirectUrl for redirect flow"),te(j(i,p.uri.Uri.parse(m+""),t,n,o).toString())}}function te(e){window.top.location.href=e}function ne(e){var t=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","isSkippingInteractiveAlways");t&&t()&&(w=e)}function oe(e){var t=p.xdc.Message.decode(e);if(null!=t&&null!=t.data&&null!=t.data.access_token){var n=G(t.data);return p.LoginStateCache.cacheLoginState(t.data,n),null!=p.LoginStateCache.getCachedLoginState()}return!1}p.Login.shouldUseExternalCookie=function(){return N},p.Login.setUseExternalCookie=function(e){null==e?p.Base.die("missing useCookie"):"number"==typeof e?e=!!e:"boolean"!=typeof e&&p.Base.die("expected useCookie to be a boolean"),N=e},$.prototype.getOptions=function(){return this.options},$.prototype.getRedirectUrl=function(){return this.redirectUrl},$.prototype.getPublicInterface=function(){return this.publicInterface},$.prototype.respond=function(e){this.response=e,p.Base.update(this.publicInterface,e),this.setStatus(S.COMPLETE);for(var t=0;t<this.callbacks.length;t++)this.callbacks[t](this.publicInterface);null!=this.redirectUrl&&Q(this.response,this.redirectUrl,this.options.popup,"token"==this.options.response_type)},$.prototype.setStatus=function(e){this.publicInterface.status=e},p.Login.authorize=function(e,t){void 0!==window.OffAmazonPayments&&void 0!==window.OffAmazonPayments.Widgets&&void 0!==window.OffAmazonPayments.Widgets.Utilities&&window.OffAmazonPayments.Widgets.Utilities.setLoginDomain(""),arguments.length<2&&p.Base.die("authorize expects two arguments (options, next)"),e&&"object"!=typeof e&&p.Base.die("authorize expects options parameter to be an object"),null!=t&&"function"!=typeof t&&"string"!=typeof t&&p.Base.die("authorize expects next parameter to be a function or a string");var n=new $(e=W(e)),o=n.getPublicInterface();return n.setStatus(S.IN_PROGRESS),null!=t&&o.onComplete(t),e.popup||"string"==typeof t?Z(n):p.Base.die("next must be redirect URI if !options.popup"),o},p.Login.resumeAuthorize=function(e){var t=oe(e);return ne(t),t},p.Login.retrieveToken=function(e,t){var n="https://"+(g.getGlobalMethod("OffAmazonPayments","Config","LOGIN_ENDPOINT")||"payments.amazon.com")+"/checkout/token",o="code="+e+"&ts="+Date.now(),i=new window.XMLHttpRequest;i.open("POST",n,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)try{var e=JSON.parse(i.responseText);if(e.status&&"function"==typeof t){var n=oe(e.message);ne(n),t(n)}}catch(e){}},i.send(o)}}(),function(){p.Profile={};var e="/ap/user/profile";function t(e,t){var n,o;try{n=p.JSON.parse(e)}catch(e){n=null}return n&&n.Error?((o={success:!1}).error=p.Base.format("%s: %s",n.Error.Code||"UnknownError",n.Error.Message||"An unknown error occurred"),void t(o)):n&&n.Profile?((o={success:!0}).profile=n.Profile,void t(o)):void t(o={success:!1,error:"UnknownError: Incomprehensible response from profile endpoint"})}p.Profile.retrieveProfile=function(n,o){if(null==o&&"function"==typeof n)return o=n,void p.Login.authorize({scope:"profile"},function(e){null==e.error?p.Profile.retrieveProfile(e.access_token,o):o({success:!1,error:e.error})});if(p.Base.validate("accessToken",n,"string"),p.Base.validate("callback",o,"function"),p.UA.doesSupportCORS()){var i,r=function(t){return p.Login.getLWAOrigin().makeUri(e,{access_token:t},"")}(n).toString();if(window.XDomainRequest)(i=new window.XDomainRequest).onload=function(){t(i.responseText,o)};else{var a=!1;(i=new window.XMLHttpRequest).onreadystatechange=function(){a||4!=i.readyState||(a=!0,t(i.responseText,o))}}i.open("GET",r,!0),i.send()}else{var s={success:!1,error:"UnsupportedOperation: Cannot retrieve profile in this browser"};o(s)}}}(),function(){var e="/auth/relyingPartyLogout",t="/checkout/logout";function n(e,t){var n,o;try{o=p.JSON.parse(e).result}catch(e){o=void 0}if(!o){n=p.Base.format("%s: %s","UnknownError","An unknown error ocurred")}i(n,t)}function o(e,t){var n,o;try{o=p.JSON.parse(e).response}catch(e){o=void 0}if(!o||o.error){var r="UnknownError",a="An unknown error ocurred";o&&o.error&&o.error.code&&o.error.message&&(r=o.error.code,a=o.error.message),n=p.Base.format("%s: %s",r,a)}i(n,t)}function i(e,t){e&&p.Base.log("logout",e),t&&"function"==typeof t&&t()}p.Login.logout=function(r){void 0!==window.OffAmazonPayments&&void 0!==window.OffAmazonPayments.Widgets&&void 0!==window.OffAmazonPayments.Widgets.Utilities&&window.OffAmazonPayments.Widgets.Utilities.setLoginDomain("");var a=p.storage.Cookie.getItem(p.Login.EXTERNAL_TOKEN_COOKIE_NAME),s=p.LoginStateCache.getCachedLoginState();a&&p.storage.Cookie.removeItem(p.Login.EXTERNAL_TOKEN_COOKIE_NAME),!a&&s&&(a=s.access_token),p.LoginStateCache.clearLoginState(),g.isConnectedAuth()?function(e){var o,i=p.Login.getOrigin().makeUri(t,null,null).toString(),r=p.Login.getEnv(),a=p.Login.getCOE(),s=p.Login.getMerchantID(),c="?coe="+a+"&env="+r+"&mID="+s;if(window.XDomainRequest)(o=new window.XDomainRequest).onload=function(){n(o.responseText,e)};else{var u=!1;(o=new window.XMLHttpRequest).onreadystatechange=function(){u||4!=o.readyState||(u=!0,n(o.responseText,e))}}o.open("GET",i+c,!1),o.withCredentials=!0,o.send(null)}(r):a&&function(t,n){p.UA.doesSupportCORS()||i("UnsupportedOperation: Cannot remotely logout in this browser",n);var r,a=p.Login.getAPIOrigin().makeUri(e,null,null).toString(),s={};if(s.token=t,s.token_type="bearer",window.XDomainRequest)(r=new window.XDomainRequest).onload=function(){o(r.responseText,n)};else{var c=!1;(r=new window.XMLHttpRequest).onreadystatechange=function(){c||4!=r.readyState||(c=!0,o(r.responseText,n))}}r.open("POST",a,!0),r.send(p.JSON.stringify(s))}(a,r)}}();var g={};const m=["connectedAuth_general"];var h=["profile","postal_code","payments:widget","payments:shipping_address","payments:billing_address","payments:partial_billing_address","payments:autopay_consent","profile:user_id","prime:benefit_status"];if(g.getAuthorizationPath=function(e,t,n,o){var i=g.readCookie(e);return null!==i&&i in t?o?t.lwa_general:t[i]:n},g.isConnectedAuth=function(){var e=g.readCookie("amazon-pay-connectedAuth");if(null!==e)return-1!==m.indexOf(e)},g.isSandbox=function(){return p.Login.getSandboxMode()},g.isConnectedAuthForAuthorize=function(e,t,n,o,i){return t&&function(e){var t=document.createElement("a");t.href=decodeURIComponent(encodeURIComponent(e)),""===t.host&&(t.href=t.href);return t.hostname}(n)!==o||!function(e){var t=!0;if(e)return e.forEach(function(e){-1===h.indexOf(e)&&(t=!1)}),t;return!1}(e)||!i?(g.createCookie("amazon-pay-connectedAuth","lwa_general"),!1):g.isConnectedAuth()},g.parseURL=function(e){return e.match(/^([\w\-\.]+\.)?amazon\.([\w\.]+)$/)},g.readCookie=function(e){if(document.cookie&&""!==document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var o=t[n].split("=");if(0===o[0].replace(/ /,"").indexOf(e))return o[1]}return null},g.createCookie=function(e,t){void 0!==window.OffAmazonPayments&&void 0!==window.OffAmazonPayments.Widgets&&void 0!==window.OffAmazonPayments.Widgets.Utilities&&window.OffAmazonPayments.Widgets.Utilities.createCookie(e,t,0)},g.publishCountMetric=function(e,t,n,o){if(t=void 0===t?{}:t,o=void 0===o||o,!(n=void 0===n||n)||g.isConnectedAuth()){var i=g.getGlobalMethod("OffAmazonPayments","Widgets","Utilities","getLoginDomainForConnectedAuth");if(i){var r=i("en_GB"),a=new p.uri.Origin("https",r,null);t.metrics=e;var s=a.makeUri("/checkout/authui/sysmetrics",t,null).toString(),c=new window.XMLHttpRequest;c.open("POST",s,o),c.send(p.JSON.stringify({}))}}},g.getGlobalMethod=function(){for(var e=Array.prototype.slice.call(arguments),t=window,n=e.shift();n;){if(!(t=t[n]))return null;n=e.shift()}return t},p.Payments={},p.Payments.PAYMENTS_WIDGET_SCOPE="payments:widget",p.Payments.hasPaymentScope=function(e){return e&&-1!==e.indexOf(p.Payments.PAYMENTS_WIDGET_SCOPE)},p.Payments.appendPaymentsScopeData=function(e,t,n){var o=p.Payments.parseScopeData(e);return p.Payments.addScopeData(o,t,n),JSON.stringify(o)&&-1!==JSON.stringify(o).indexOf(p.Payments.PAYMENTS_WIDGET_SCOPE)||(o={},p.Payments.addScopeData(o,t,n)),JSON.stringify(o)},p.Payments.addScopeData=function(e,t,n){e[p.Payments.PAYMENTS_WIDGET_SCOPE]={redirectUrl:n.toOrigin().toString(),originUrl:window.location.origin,isSandbox:t||!1,flow:"fundus"}},p.Payments.parseScopeData=function(e){try{return e&&""!==e?JSON.parse(e):{}}catch(e){return{}}},window.amazon=window.amazon||{},window.amazon.Login=window.amazon.Login||{},window.amazon.Login.getClientId=function(){return p.Login.getClientId()},window.amazon.Login.setClientId=function(e){return p.Login.setClientId(e)},window.amazon.Login.setMerchantID=function(e){},window.amazon.Login.setDomain=function(e){return p.Login.setDomain(e)},window.amazon.Login.setLWADomain=function(e){return p.Login.setLWADomain(e)},window.amazon.Login.setFundusDomain=function(e){return p.Login.setFundusDomain(e)},window.amazon.Login.setAPIDomain=function(e){return p.Login.setAPIDomain(e)},window.amazon.Login.setSandboxMode=function(e){return p.Login.setSandboxMode(e)},window.amazon.Login.setSiteDomain=function(e){return p.storage.setDomain(e)},window.amazon.Login.Region=p.Login.Region,window.amazon.Login.Metrics=p.Login.Metrics,window.amazon.Login.setRegion=function(e){return p.Login.setRegion(e)},window.amazon.Login.setWebflowParams=function(e,t,n){return p.Login.setWebflowParams(e,t,n)},window.amazon.Login.setLanguage=function(e){return p.Login.setLanguage(e)},window.amazon.Login.setLanguageHint=function(e){return p.Login.setLanguageHint(e)},window.amazon.Login.setUseCookie=function(e){return p.Login.setUseExternalCookie(e)},window.amazon.Login.authorize=function(e,t){return p.Login.authorize(e,t)},window.amazon.Login.logout=function(){return p.Login.logout()},window.amazon.Login.retrieveProfile=function(e,t){return p.Profile.retrieveProfile(e,t)},window.amazon.Login.synchronizeSession=function(){return p.Login.synchronizeSession()},window.amazon.Login.resumeAuthorize=function(e){return p.Login.resumeAuthorize(e)},window.amazon.Login.retrieveToken=function(e,t){return p.Login.retrieveToken(e,t)},window.amazon.Login.isTokenFromAmazonApp=function(){return p.Login.isTokenFromAmazonApp()},void 0!==window.OffAmazonPayments&&void 0!==window.OffAmazonPayments.Config){var _=window.OffAmazonPayments.Config.COE,v=window.OffAmazonPayments.Config.ENV,w=window.OffAmazonPayments.Config.LEDGER_CURRENCY;p.Login.setWebflowParams(_,w,v)}return void 0!==window.OffAmazonPayments&&void 0!==window.OffAmazonPayments.Widgets&&void 0!==window.OffAmazonPayments.Widgets.Utilities&&window.OffAmazonPayments.Widgets.Utilities.setLoginDomain(""),"function"==typeof window.onAmazonLoginReady&&window.onAmazonLoginReady(),e.CONNECTED_AUTH_FLOW_VALUES=m,e.LWA_FLOW_VALUE="lwa_general",e.Utilities=g,e}({});
})();
}
